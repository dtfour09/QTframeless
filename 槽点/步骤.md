## 一，基本的构成

### 1，窗体的细分 

​                          如图1-1所示。

###                                 图1-1  窗口细分图

为了更方便实现各个部分的功能，把页面分为了标题栏、屏幕窗口 和 边框部分。

### 2，边框部分

边框主要是为窗口的拉伸服务的。

### 3，标题栏部分

标题栏内部排序从左到右为  icon ，标题 ， 以及动态区， 

该部分主要是为了按钮的排布，和提供接口来向里面添加标题栏。

4，屏幕窗口部分。

这部分因为要替代原有的 中心窗口，所以该部分需要自己实现。

主要是为了正常的图像显示部分服务的。

# 二，实现的思路（由外到里）

## 1，主体窗口

主题窗口作为最基本功能，要模拟出系统窗口所具备的应有功能

如以下：

中心窗口的替换。通过维护一个widget实现

窗口的拉伸。通过鼠标移动，鼠标按下，鼠标释放，鼠标悬浮事件来完成，已修改为鼠标悬浮

窗口排布。

除此之外：

dpi更新。

内部窗口偏移量。

鼠标坐标信号。

功能聚合。

## 2，标题栏

标题栏功能如以下所示。

移动主窗口。

排布。

动态加入新的按钮。

## 3，自定义按钮以及以及菜单

通过自定义窗口来完成的功能，主要是复制floatbar里面这俩组件的功能。

不能说是继承，因为这方面在后边的改动中会较大的变化。

menu 对于button的依赖比较大。

## 4，按钮聚合以及添加。

本来此功能是可以添加到mainwindowbar里面的，但是想了想，这部分需要被摘除，不然如同floatbar里面的功能被死死的绑定。

 QFlags<Qt::WindowType>(ToolTip|FramelessWindowHint|WindowTitleHint|WindowSystemMenuHint|WindowMinMaxButtonsHint|WindowCloseButtonHint|WindowFullscreenButtonHint) 