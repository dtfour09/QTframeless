# 框架设计

![](C:\Users\DYL\Desktop\窗口设计\图片\框架设计.png)

## 主窗体

主窗体负责协调标题栏与屏幕窗口

主窗口负责提供控制窗口的大小以及dpi变化。

首先检测当前屏幕的dpi，窗口大小。



#### 初始化检测：

主动

#### 被动检测：

当前窗口的dpi放生了变化，更新dpi。

#### 主动检测：

共同点，检测但钱DPI

## 鼠标事件

#### 鼠标按压事件1

若按压在指定区域处理，非指定区域不处理。

#### 鼠标释放事件2

前提1，做出处理。

#### 鼠标移动事件3

前提1，做出处理。

#### 鼠标双击事件4

该事件只有在标题栏触发

## 窗口改变事件

### 大小改变

事件比较多需要分类

### 位置改变

这个响应要快

### 全屏

标题栏隐藏，浮动窗口显示，

及屏幕窗口获得最大化。

### 最大化

无影响，

### 最小化

无影响，



# 过程

1，创建打开鼠标事件空白的主窗口

![](C:\Users\DYL\Desktop\窗口设计\图片\主窗口.png)

2，更新DPI，以及分辨率，以及窗口大小事件。

3，放入标题栏，并关联DPi及窗口大小变化。

4，放入应用窗口，关联DPI及窗口大小变化。

5，窗口标题栏关联全屏化问题。

```
    QDesktopWidget * desktop = QApplication::desktop();
    int curMonitor = desktop->screenNumber(this);
    m_dpi = desktop->screen(curMonitor)->logicalDpiX() / 96;
    用来获取第几块屏幕以及第几块屏幕的dpi
```